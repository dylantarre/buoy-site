---
import IntegrationLayout from '../../layouts/IntegrationLayout.astro'
import Terminal from '../../components/Terminal.astro'

const features = [
  {
    title: 'Story Scanning',
    description: 'Scan your Storybook stories for hardcoded values and design drift.'
  },
  {
    title: 'Component Coverage',
    description: 'Track which components have stories and which are undocumented.'
  },
  {
    title: 'Args Analysis',
    description: 'Validate story args against component prop types for consistency.'
  },
  {
    title: 'Addon Integration',
    description: 'Optional Storybook addon for inline drift reports in your stories.'
  },
  {
    title: 'CSF3 Support',
    description: 'Full support for Component Story Format 3 and TypeScript stories.'
  },
  {
    title: 'MDX Stories',
    description: 'Scan MDX documentation files for design drift examples.'
  },
]

const terminalLines = [
  { text: '', delay: 600 },
  { text: '<span class="text-buoy">âš“</span> Scanning Storybook...', type: 'output', delay: 800 },
  { text: '', delay: 1200 },
  { text: 'Found <span class="text-light">156</span> stories', type: 'output', delay: 1400 },
  { text: 'Found <span class="text-light">42</span> documented components', type: 'output', delay: 1600 },
  { text: '', delay: 1800 },
  { text: '<span class="text-warning">WARNING</span> 15 components without stories', type: 'warning', delay: 2000 },
  { text: '<span class="text-warning">WARNING</span> 8 stories with hardcoded args', type: 'warning', delay: 2200 },
  { text: '<span class="text-info">INFO</span> 3 arg/prop type mismatches', type: 'info', delay: 2400 },
]
---

<IntegrationLayout
  title="Storybook Component Drift Detection | Buoy"
  description="Scan your Storybook for design drift. Compare documented components to actual implementations across your codebase."
  keywords="storybook audit, storybook component drift, storybook consistency"
  heroTitle="Storybook Component Drift Detection"
  heroDescription="Keep your Storybook in sync with your codebase. Find undocumented components, inconsistent stories, and design drift."
  icon="ðŸ“–"
  iconBg="bg-pink-500/20"
>
  <!-- Features Grid -->
  <section class="py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Storybook Integration Features</h2>

      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        {features.map((feature) => (
          <div class="bg-navy/50 border border-navy-light/20 rounded-xl p-6">
            <h3 class="font-semibold text-light mb-2">{feature.title}</h3>
            <p class="text-sm text-slate">{feature.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Terminal Demo -->
  <section class="py-16 bg-navy">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">See it in action</h2>
      <Terminal command="buoy check --storybook" lines={terminalLines} />
    </div>
  </section>

  <!-- Configuration -->
  <section class="py-16">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <h2 class="text-2xl font-bold text-light mb-8 text-center">Configuration Example</h2>

      <div class="bg-navy border border-navy-light/30 rounded-xl overflow-hidden">
        <div class="px-4 py-3 bg-navy-dark border-b border-navy-light/20">
          <span class="text-sm text-slate font-mono">buoy.config.mjs</span>
        </div>
        <pre class="p-4 text-sm font-mono overflow-x-auto"><code class="text-slate">{`// buoy.config.mjs
export default {
  storybook: {
    // Storybook config directory
    configDir: '.storybook',

    // Story file patterns
    stories: ['src/**/*.stories.@(ts|tsx|mdx)'],

    // Require stories for all components
    requireStories: true,
  },

  include: ['src/components/**/*.tsx'],
  tokens: './src/tokens',
}`}</code></pre>
      </div>
    </div>
  </section>
</IntegrationLayout>
