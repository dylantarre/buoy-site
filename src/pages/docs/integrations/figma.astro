---
import DocsLayout from '../../../layouts/DocsLayout.astro'
---

<DocsLayout title="Figma / Tokens Studio" description="Connect Buoy to Figma for token sync">
  <h1>Figma / Tokens Studio</h1>

  <p>
    Connect Buoy to Figma to compare your codebase directly against your design file.
    Works with native Figma styles or Tokens Studio exports.
  </p>

  <h2>Quick Start</h2>

  <h3>Option 1: Tokens Studio Export</h3>

  <p>Export your tokens from Tokens Studio and compare locally:</p>

  <ol>
    <li>In Figma, open Tokens Studio plugin</li>
    <li>Export as JSON (Settings → Export → JSON)</li>
    <li>Save as <code>design-tokens.json</code> in your project</li>
    <li>Run: <code>buoy compare design-tokens.json</code></li>
  </ol>

  <h3>Option 2: Figma API (Live Sync)</h3>

  <p>Connect directly to Figma for always-current tokens:</p>

  <ol>
    <li>Generate a Figma access token</li>
    <li>Add to your environment</li>
    <li>Configure in buoy.config.mjs</li>
  </ol>

  <h2>Getting a Figma Token</h2>

  <ol>
    <li>Go to <strong>Figma Settings → Account</strong></li>
    <li>Scroll to <strong>Personal access tokens</strong></li>
    <li>Click <strong>Generate new token</strong></li>
    <li>Give it a name like "Buoy"</li>
    <li>Copy the token (you won't see it again)</li>
  </ol>

  <h2>Configuration</h2>

  <pre><code set:text={`// buoy.config.mjs
export default {
  tokens: {
    figma: {
      fileId: 'your-figma-file-id',
      accessToken: process.env.FIGMA_TOKEN,
    },
  },
}`} /></pre>

  <h3>Finding Your File ID</h3>

  <p>The file ID is in your Figma URL:</p>

  <pre><code>https://www.figma.com/file/abc123xyz/Design-System
                           ↑↑↑↑↑↑↑↑↑↑↑
                           This is your file ID</code></pre>

  <h3>Environment Variable</h3>

  <p>Set <code>FIGMA_TOKEN</code> in your environment:</p>

  <pre><code># .env (local development)
FIGMA_TOKEN=figd_xxxxxxxxxxxxxxxxxxxxx

# GitHub Actions
env:
  FIGMA_TOKEN: $&#123;&#123; secrets.FIGMA_TOKEN &#125;&#125;</code></pre>

  <h2>What Buoy Extracts</h2>

  <p>From Figma files, Buoy extracts:</p>

  <table>
    <thead>
      <tr>
        <th>Category</th>
        <th>What's Extracted</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Colors</td>
        <td>Color styles, fill colors, stroke colors</td>
      </tr>
      <tr>
        <td>Typography</td>
        <td>Text styles, font families, sizes, weights</td>
      </tr>
      <tr>
        <td>Spacing</td>
        <td>Auto-layout gaps, padding values</td>
      </tr>
      <tr>
        <td>Border radius</td>
        <td>Corner radius values</td>
      </tr>
      <tr>
        <td>Effects</td>
        <td>Shadows, blur values</td>
      </tr>
    </tbody>
  </table>

  <h2>Tokens Studio Support</h2>

  <p>If you use Tokens Studio, Buoy supports its JSON format directly:</p>

  <pre><code set:text={`{
  "colors": {
    "primary": {
      "500": { "value": "#3b82f6", "type": "color" }
    }
  },
  "spacing": {
    "sm": { "value": "8px", "type": "spacing" },
    "md": { "value": "16px", "type": "spacing" }
  }
}`} /></pre>

  <h2>Comparison Output</h2>

  <pre><code>$ buoy compare --figma

Comparing against Figma file "Design System"...

Last synced: 2 hours ago

Token Coverage
──────────────

Colors (24 Figma styles)
  ✓ 20 matched in code
  ✗ 4 not used in code
  ⚠ 5 in code but not in Figma:
      #f9fafb  (3 usages)
      #3b83f6  (1 usage) → close to primary/500

Typography (8 Figma styles)
  ✓ 7 matched
  ✗ 1 not used

Coverage: 82%</code></pre>

  <h2>Filtering Pages/Frames</h2>

  <p>Only extract tokens from specific pages:</p>

  <pre><code set:text={`tokens: {
  figma: {
    fileId: 'abc123xyz',
    accessToken: process.env.FIGMA_TOKEN,
    pages: ['Design Tokens', 'Colors'],  // Only these pages
  },
}`} /></pre>

  <h2>CI Integration</h2>

  <p>Add Figma sync to your CI pipeline:</p>

  <pre><code>- name: Run Buoy with Figma
  run: npx @buoy-design/cli ci --threshold 70
  env:
    FIGMA_TOKEN: $&#123;&#123; secrets.FIGMA_TOKEN &#125;&#125;</code></pre>

  <h2>Troubleshooting</h2>

  <h3>403 Forbidden</h3>

  <p>Your token may have expired or lack permissions. Generate a new one.</p>

  <h3>No Tokens Found</h3>

  <p>Ensure your Figma file has published styles. Draft styles aren't included.</p>

  <h3>Rate Limiting</h3>

  <p>Figma has API limits. Use local token exports for frequent runs.</p>

  <h2>Related</h2>

  <ul>
    <li><a href="/docs/cli/compare">buoy compare</a> — Compare command reference</li>
    <li><a href="/docs/features/token-comparison">Token Comparison</a> — How comparison works</li>
    <li><a href="/docs/integrations/github-actions">GitHub Actions</a> — CI setup</li>
  </ul>
</DocsLayout>
