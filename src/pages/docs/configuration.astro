---
import DocsLayout from '../../layouts/DocsLayout.astro'
---

<DocsLayout title="Configuration" description="Configure Buoy for your project">
  <h1>Configuration</h1>

  <p>
    Buoy uses a <code>buoy.config.mjs</code> file in your project root. Most settings are
    auto-detected, but you can customize everything.
  </p>

  <h2>Quick Start</h2>

  <pre><code>npx @buoy-design/cli init</code></pre>

  <p>This generates a config based on your detected frameworks.</p>

  <h2>Config File</h2>

  <pre><code set:text={`// buoy.config.mjs
export default {
  // Source scanning
  sources: {
    react: { enabled: true },
    vue: { enabled: false },
    svelte: { enabled: false },
    angular: { enabled: false },
    tailwind: { enabled: true },
  },

  // File patterns
  include: ['src/**/*.{tsx,jsx,vue,svelte,css,scss}'],
  exclude: ['node_modules', 'dist', 'build', '**/*.test.*'],

  // Design tokens reference
  tokens: {
    file: 'design-tokens.json',  // Local file
    // OR
    figma: {
      fileId: 'your-figma-file-id',
      accessToken: process.env.FIGMA_TOKEN,
    },
  },

  // Health thresholds
  thresholds: {
    minScore: 70,           // Minimum passing score
    maxHardcoded: 10,       // Max allowed hardcoded values
  },

  // Output settings
  output: {
    format: 'table',        // 'table' | 'json' | 'markdown'
  },
}`} /></pre>

  <h2>Source Options</h2>

  <h3>React</h3>

  <pre><code set:text={`sources: {
  react: {
    enabled: true,
    include: ['src/**/*.tsx', 'src/**/*.jsx'],
    extractInlineStyles: true,
    extractStyledComponents: true,
  },
}`} /></pre>

  <h3>Tailwind</h3>

  <pre><code set:text={`sources: {
  tailwind: {
    enabled: true,
    config: 'tailwind.config.js',     // Path to config
    detectArbitrary: true,            // Flag arbitrary values like [#fff]
  },
}`} /></pre>

  <h3>Vue / Svelte / Angular</h3>

  <pre><code set:text={`sources: {
  vue: {
    enabled: true,
    include: ['src/**/*.vue'],
    extractScopedStyles: true,
  },
  svelte: {
    enabled: true,
    include: ['src/**/*.svelte'],
  },
  angular: {
    enabled: true,
    include: ['src/**/*.component.ts'],
  },
}`} /></pre>

  <h2>Token Configuration</h2>

  <h3>Local Token File</h3>

  <pre><code set:text={`tokens: {
  file: 'design-tokens.json',
}`} /></pre>

  <p>Supports JSON (W3C format), CSS, and SCSS files.</p>

  <h3>Figma Integration</h3>

  <pre><code set:text={`tokens: {
  figma: {
    fileId: 'abc123xyz',
    accessToken: process.env.FIGMA_TOKEN,
    // Optional: specific pages/frames
    pages: ['Design Tokens'],
  },
}`} /></pre>

  <p>See <a href="/docs/integrations/figma">Figma Integration</a> for setup.</p>

  <h2>Threshold Configuration</h2>

  <pre><code set:text={`thresholds: {
  minScore: 70,            // CI fails below this score
  maxHardcoded: 10,        // Max hardcoded values allowed
  maxCloseMatches: 0,      // Zero tolerance for typos
}`} /></pre>

  <h2>Environment Variables</h2>

  <table>
    <thead>
      <tr>
        <th>Variable</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>FIGMA_TOKEN</code></td>
        <td>Figma API access token</td>
      </tr>
      <tr>
        <td><code>GITHUB_TOKEN</code></td>
        <td>GitHub token for PR comments</td>
      </tr>
      <tr>
        <td><code>BUOY_STRICT</code></td>
        <td>Enable strict mode (1 = enabled)</td>
      </tr>
    </tbody>
  </table>

  <h2>Ignoring Files</h2>

  <p>Add patterns to <code>exclude</code>:</p>

  <pre><code>exclude: [
  'node_modules',
  'dist',
  'build',
  '**/*.test.*',
  '**/*.stories.*',
  'src/legacy/**',      // Ignore legacy code
]</code></pre>

  <h2>Inline Ignores</h2>

  <p>Ignore specific lines in your code:</p>

  <pre><code>// buoy-ignore-next-line
const specialColor = '#custom123';

/* buoy-ignore */
const legacyStyles = {
  padding: '13px',
  color: '#abc123',
};</code></pre>

  <h2>Related</h2>

  <ul>
    <li><a href="/docs/cli/init">buoy init</a> — Generate config automatically</li>
    <li><a href="/docs/integrations/figma">Figma Integration</a> — Connect to Figma</li>
    <li><a href="/docs/integrations/github-actions">GitHub Actions</a> — CI configuration</li>
  </ul>
</DocsLayout>
