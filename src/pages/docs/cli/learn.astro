---
import DocsLayout from '../../../layouts/DocsLayout.astro'
---

<DocsLayout title="buoy learn" description="Analyze drift history for patterns and learnings">
  <h1>buoy learn</h1>

  <p>
    Analyze your drift history to surface repeat patterns. Shows which mistakes you
    keep making so you can address the root cause, not just individual instances.
  </p>

  <h2>Usage</h2>

  <pre><code>buoy learn [options]</code></pre>

  <h2>What It Does</h2>

  <ol>
    <li><strong>Aggregates</strong> drift signals from recent scans</li>
    <li><strong>Groups</strong> by type and component</li>
    <li><strong>Identifies</strong> patterns that occur multiple times</li>
    <li><strong>Surfaces</strong> your most common mistakes</li>
  </ol>

  <h2>Options</h2>

  <table>
    <thead>
      <tr>
        <th>Option</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>-n, --limit &lt;number&gt;</code></td>
        <td>Number of scans to analyze (default: 10)</td>
      </tr>
      <tr>
        <td><code>--threshold &lt;number&gt;</code></td>
        <td>Minimum occurrences to show (default: 2)</td>
      </tr>
      <tr>
        <td><code>--json</code></td>
        <td>Output result as JSON</td>
      </tr>
    </tbody>
  </table>

  <h2>Example Output</h2>

  <pre><code>$ buoy learn

  Your Repeat Mistakes

● Hardcoded Value in Button (5x)
    Files: src/Button.tsx, src/IconButton.tsx, src/LinkButton.tsx
    Fix: Use var(--color-primary) instead

● Arbitrary Spacing in Card (3x)
    Files: src/Card.tsx, src/CardHeader.tsx
    Fix: Use spacing.4 instead

● Naming Inconsistency in Modal (2x)
    Files: src/Modal.tsx, src/Dialog.tsx
    Fix: Use consistent naming pattern

Key Insight
────────────────────────────────────
Your biggest issue is Hardcoded Value in Button (5x)

Analyzed 10 scans, 47 total drifts
Found 3 repeat patterns</code></pre>

  <h2>How It Helps</h2>

  <p>
    Instead of fixing drift one file at a time, <code>buoy learn</code> helps you see
    the bigger picture:
  </p>

  <ul>
    <li><strong>Systemic issues</strong> — Same mistake across multiple files</li>
    <li><strong>Component hotspots</strong> — Which components drift most</li>
    <li><strong>Habit patterns</strong> — Types of drift you repeatedly introduce</li>
  </ul>

  <h2>Building History</h2>

  <p>
    <code>buoy learn</code> requires scan history. Run <code>buoy check</code> multiple
    times to build up data. Each scan is stored locally and used for pattern analysis.
  </p>

  <pre><code># Build up scan history
buoy check  # Run after making changes
buoy check  # Run again later
buoy check  # More data = better insights

# Then analyze patterns
buoy learn</code></pre>

  <h2>JSON Output</h2>

  <p>Use <code>--json</code> for programmatic access:</p>

  <pre><code>$ buoy learn --json
&#123;
  "project": "my-app",
  "scansAnalyzed": 10,
  "totalDrifts": 47,
  "patterns": [
    &#123;
      "type": "hardcoded-value",
      "component": "Button",
      "count": 5,
      "files": ["src/Button.tsx", "src/IconButton.tsx"],
      "severity": "warning",
      "example": &#123;
        "message": "Hardcoded color #3b82f6",
        "details": &#123; "expected": "var(--color-primary)" &#125;
      &#125;
    &#125;
  ]
&#125;</code></pre>

  <h2>Related Commands</h2>

  <ul>
    <li><a href="/docs/cli/check">buoy check</a> — Run scans to build history</li>
    <li><a href="/docs/cli/history">buoy history</a> — View scan history and trends</li>
    <li><a href="/docs/cli/drift">buoy drift</a> — Detailed drift analysis</li>
    <li><a href="/docs/cli/fix">buoy fix</a> — Apply fixes for drift issues</li>
  </ul>
</DocsLayout>
